---
title: SKE Testing Framework
description: Reference for the SKE Testing Framework
sidebar_label: SKE Testing Framework
---

The SKE Testing Framework paves the way for easy testing of Kratix Promises, providing fast feedback and confidence in your Pipelines and Stages
without needing to deploy your Promise.

Available as plugin to the [Kratix CLI](https://docs.kratix.io/main/kratix-cli/intro), the framework provides validation of the expected behaviour when Pipelines and Pipeline stages run and validation of
the outputs generated when Pipelines and individual stages run to completion.

## Prerequisites

You must have the `kratix` CLI installed at version `0.9.0` or later.

## Installing the Testing Framework

Download the latest `kratix-test` plugin binary from the [SKE Releases Bucket](http://syntasso-enterprise-releases.s3-website.eu-west-2.amazonaws.com/#ske-testing-framework/). Place the binary anywhere on your `PATH`.

As a the binary is in your path, is should be visible when you run:

```bash
kratix plugin list
```

To confirm that the plugin has been installed without issue, run:

```bash
kratix test --help
```

You should see output similar to:

```bash
A command for testing Kratix Promise stages

Usage:
  test [command]

Available Commands:
  completion  Generate the autocompletion script for the specified shell
  help        Help about any command
  pipeline    A command for testing Kratix Promise Pipelines
  stage       A command for testing Kratix Promise stages

Flags:
  -h, --help   help for test

Use "test [command] --help" for more information about a command.
```

## Testing your Promise with the Testing Framework

### Testing individual Pipeline Stages

Given your Promise was generated with the Kratix CLI, the directory structure should be similar to the following:

```bash
├── README.md
├── example-resource.yaml
├── promise.yaml
└── workflows
    └── promise
        └── configure
            └── setup
                ├── deploy-infrastructure
                │   ├── Dockerfile
                │   ├── resources
                │   └── scripts
                │       └── pipeline.sh
                ├── apply-rbac-rules
                │   ├── Dockerfile
                │   ├── resources
                │   └── scripts
                │       └── pipeline.sh
                └── security-scan
                    ├── Dockerfile
                    ├── resources
                    └── scripts
                        └── pipeline.sh
```

To test given Pipeline Stage, you can use to `kratix test stage` command, specifying the workflow type, workflow action,
Pipeline name and stage name that you wish to test. Alongside these arguments, you will also need to provide:

- Test input via the `--input-dir` flag. This is a directory that should contain the `object.yaml` that you want test your Stage against
- Expected test outputs via the `--expected-output-dir`. This should contain files that match the files that you expect to be written
to the `/kratix/outputs` directory by the stage.

For the above example, we could run:

```bash
kratix test stage promise/configure/setup deploy-infrastructure \
  --input-dir inputs \
  --expected-output-dir setup-outputs
```

This will run the container for the Pipeline Stage (as specified in the `promise.yaml`) and validate whether the outputs generated by the
Stage match those in the `setup-outputs` directory. If they match, the command will exit 0. However, if they do not match, the test will display
a diff between the files and exit 1.

### Testing a Pipeline

To test a Pipeline by running each of its Stages in sequence, you can use the `kratix test pipeline command`. For the above example, we could run:

```bash
kratix test pipeline promise/configure/setup \
  --input-dir inputs \
  --expected-output-dir setup-outputs
```

This will run each of the Stages of the `setup` pipeline and and validate whether the outputs generated by all of the Stages match those in the
`setup-outputs` directory. If they match, the command will exit 0. However, if they do not match, the test will display a diff between the files
and exit 1.

:::tip
You can use the `--build` flag to build with both the `stage` and `pipeline` commands to build the Pipeline Stages before running the tests
:::