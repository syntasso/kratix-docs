<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-main/platform-concepts/resiliency" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Resiliency | Kratix</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.kratix.io/main/platform-concepts/resiliency"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="kratix docs, kratix documentation"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Resiliency | Kratix"><meta data-rh="true" name="description" content="How Kratix supports resilient platform operations."><meta data-rh="true" property="og:description" content="How Kratix supports resilient platform operations."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.kratix.io/main/platform-concepts/resiliency"><link data-rh="true" rel="alternate" href="https://docs.kratix.io/main/platform-concepts/resiliency" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.kratix.io/main/platform-concepts/resiliency" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://0T1XCKLOOH-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Platform Concepts","item":"https://docs.kratix.io/category/platform-concepts"},{"@type":"ListItem","position":2,"name":"Resiliency","item":"https://docs.kratix.io/main/platform-concepts/resiliency"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Kratix RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Kratix Atom Feed">

<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-M8KNBP6C",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>



<link rel="search" type="application/opensearchdescription+xml" title="Kratix" href="/opensearch.xml">



<script src="https://app.termly.io/resource-blocker/6f1bb777-b1e3-40d9-a340-e80f132710f0?autoBlock=on"></script><link rel="stylesheet" href="/assets/css/styles.31a4a936.css">
<script src="/assets/js/runtime~main.58c0d1a8.js" defer="defer"></script>
<script src="/assets/js/main.debd6bd9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M8KNBP6C" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://kratix.io" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/kratix-purple-io.svg" alt="Kratix Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/kratix-white-io.svg" alt="Kratix Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Docs</a><a class="navbar__item navbar__link" href="/workshop/intro">Workshops</a><a class="navbar__item navbar__link" href="/marketplace">Marketplace</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/ske">Enterprise</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/syntasso/kratix" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository">syntasso/kratix<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://kratixworkspace.slack.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-slack-link" aria-label="Kratix Slack Workspace"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/main/quick-start"><span title="Quick Start" class="linkLabel_WmDU">Quick Start</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/category/reference"><span title="Reference" class="categoryLinkLabel_W154">Reference</span></a><button aria-label="Expand sidebar category &#x27;Reference&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/category/guides"><span title="Guides" class="categoryLinkLabel_W154">Guides</span></a><button aria-label="Expand sidebar category &#x27;Guides&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/category/platform-concepts"><span title="Platform Concepts" class="categoryLinkLabel_W154">Platform Concepts</span></a><button aria-label="Collapse sidebar category &#x27;Platform Concepts&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/main/platform-concepts/resiliency"><span title="Resiliency" class="linkLabel_WmDU">Resiliency</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/main/platform-concepts/kratix-resources"><span title="Kratix Internal Objects" class="categoryLinkLabel_W154">Kratix Internal Objects</span></a><button aria-label="Expand sidebar category &#x27;Kratix Internal Objects&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/main/platform-concepts/secrets"><span title="Secret management" class="linkLabel_WmDU">Secret management</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/main/platform-concepts/multi-tenancy"><span title="Multi-tenancy" class="linkLabel_WmDU">Multi-tenancy</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/main/platform-concepts/private-image-registries"><span title="Private Image Registries" class="linkLabel_WmDU">Private Image Registries</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/category/identity-and-access"><span title="Identity and Access" class="categoryLinkLabel_W154">Identity and Access</span></a><button aria-label="Expand sidebar category &#x27;Identity and Access&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/main/platform-concepts/api"><span title="API" class="linkLabel_WmDU">API</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/main/kratix-cli/intro"><span title="Kratix CLI" class="categoryLinkLabel_W154">Kratix CLI</span></a><button aria-label="Expand sidebar category &#x27;Kratix CLI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/category/promise-sdks"><span title="Promise SDKs" class="categoryLinkLabel_W154">Promise SDKs</span></a><button aria-label="Expand sidebar category &#x27;Promise SDKs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/main/how-kratix-complements"><span title="How Kratix Complements" class="categoryLinkLabel_W154">How Kratix Complements</span></a><button aria-label="Expand sidebar category &#x27;How Kratix Complements&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/main/faq"><span title="Frequently Asked Questions" class="linkLabel_WmDU">Frequently Asked Questions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/main/troubleshooting"><span title="Troubleshooting" class="linkLabel_WmDU">Troubleshooting</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/main/community"><span title="Community" class="linkLabel_WmDU">Community</span></a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/category/platform-concepts"><span>Platform Concepts</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Resiliency</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Resiliency</h1></header><p>This page describes Kratix&#x27;s approach to implementing resiliency.</p>
<p>By the end of this page, you should understand:</p>
<ul>
<li class="">What &quot;high availability&quot; (HA) and disaster recovery (DR) mean for Kratix<!-- -->
<ul>
<li class="">How intent is represented and persisted in Kubernetes resources</li>
<li class="">How reconciliation works at a high level, including eventual consistency</li>
</ul>
</li>
<li class="">How to plan and test disaster recovery for Kratix state<!-- -->
<ul>
<li class="">How your system will behave during different component outages</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="resiliency-model-overview">Resiliency model overview<a href="#resiliency-model-overview" class="hash-link" aria-label="Direct link to Resiliency model overview" title="Direct link to Resiliency model overview" translate="no">​</a></h2>
<p>Kratix is a Kubernetes-native platform control plane: intent is declared as Kubernetes
resources (CRDs and core resources) and persisted in etcd via kube-apiserver.</p>
<p>Kratix converges on that intent using asynchronous reconciliation (event-driven
plus periodic), so behaviour is eventually consistent rather than synchronous.</p>
<p>Availability has two distinct dimensions:</p>
<ul>
<li class=""><strong>Declaring intent</strong> depends on kube-apiserver and etcd availability.</li>
<li class=""><strong>Executing intent</strong> depends on Kratix controllers and external dependencies
(StateStores and APIs).</li>
</ul>
<p>If Kratix or external dependencies are temporarily unavailable, intent remains
persisted in etcd, and reconciliation resumes when they recover.</p>
<p>For user experience, fast acknowledgement of submitted intent is usually more
important than the exact reconciliation completion time.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-kratix-stores-and-acts-on-intent">How Kratix stores and acts on intent<a href="#how-kratix-stores-and-acts-on-intent" class="hash-link" aria-label="Direct link to How Kratix stores and acts on intent" title="Direct link to How Kratix stores and acts on intent" translate="no">​</a></h2>
<p>Kratix follows the Kubernetes controller pattern. You declare intent by
creating or updating Kubernetes resources. Kubernetes persists those resources
into its backing store, normally etcd. Kratix observes changes and reconciles
asynchronously towards the desired state that the resource defines.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="where-kratix-state-lives">Where Kratix state lives<a href="#where-kratix-state-lives" class="hash-link" aria-label="Direct link to Where Kratix state lives" title="Direct link to Where Kratix state lives" translate="no">​</a></h3>
<p>Kratix represents all intent and progress as Kubernetes resources. It uses a mix of
core resources (for example, Jobs) and custom resources (for example,
Promises, Resource Requests, etc.) to represent the desired state and observed state.</p>
<p>All Kubernetes resources follow the same convention:</p>
<ul>
<li class=""><code>spec</code> describes the desired state (what you want Kratix to achieve).</li>
<li class=""><code>status</code> describes the observed state (what has happened so far).</li>
</ul>
<p>These resources are persisted by kube-apiserver into etcd, the backing data
store for Kubernetes cluster state. etcd uses the Raft consensus algorithm to
maintain a consistent replicated log and elect a leader. This matters because:</p>
<ul>
<li class="">etcd replicates committed data across members, so quorum is required for
durable writes.</li>
<li class="">Availability of the Kubernetes API for writes is tied to etcd availability.</li>
</ul>
<p>You do not need to understand Raft in detail to operate Kratix, but you do need
to treat the Kubernetes control plane and etcd durability as the primary
availability boundary for Kratix.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="workflow-related-state">Workflow-related state<a href="#workflow-related-state" class="hash-link" aria-label="Direct link to Workflow-related state" title="Direct link to Workflow-related state" translate="no">​</a></h4>
<p>A major part of Kratix reconciliation is orchestrating Workflows defined within
Promises. Workflow execution and its declarative outputs (e.g., Terraform files)
are represented as Kubernetes resources <a class="" href="/main/platform-concepts/kratix-resources#output-objects">called <code>Work</code>s and the scheduling of
them as
<code>WorkPlacement</code>s</a>.
Like other cluster state, <code>Work</code>/<code>WorkPlacement</code>s are persisted to etcd.</p>
<p>This matters for HA/DR because <code>Work/WorkPlacement</code> is replayable from the control plane: after a
restart, Kratix can observe existing <code>Work/WorkPlacement</code> resources and continue convergence.</p>
<p>Destinations represent systems that Kratix can write documents to, which are
then reconciled by an external tool (for example, Flux, Argo CD, or Terraform
Enterprise). They are conceptually similar to nodes in Kubernetes: Destinations
have labels, and <code>Work</code> uses selectors to match eligible Destinations. Kratix
then creates a <code>WorkPlacement</code> to record the chosen Destination for that
<code>Work</code>, similar to how a scheduler selects a node for a workload and records
the decision by creating a Pod.</p>
<p>It is important to restore <code>WorkPlacement</code>s during disaster recovery. A <code>WorkPlacement</code>
records the intent of which destination the <code>Work</code> was scheduled to. If a <code>Work</code>
matches multiple eligible destinations, Kratix will select a destination at random from
those matched by the selector. If the <code>WorkPlacement</code> is missing after restore, the
<code>Work</code> may be scheduled to a different destination.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Back up and restore <code>WorkPlacement</code>s</div><div class="admonitionContent_BuS1"><p>Ensure your backups include <code>WorkPlacement</code>s and validate they are present
after restore before re-enabling automation.</p><p>If <code>WorkPlacement</code>s are missing, the scheduler can make a new selection and
place <code>Work</code> on a different Destination. That can cause non-deterministic
placement and unexpected drift.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="persisted-intent-and-restart-behaviour">Persisted intent and restart behaviour<a href="#persisted-intent-and-restart-behaviour" class="hash-link" aria-label="Direct link to Persisted intent and restart behaviour" title="Direct link to Persisted intent and restart behaviour" translate="no">​</a></h3>
<p>Because intent is stored in etcd (via kube-apiserver), it survives Kratix restarts:</p>
<ul>
<li class="">Restarting the Kratix pod does not remove or reset the desired state.</li>
<li class="">When Kratix starts, it lists existing Kratix resources and
resumes reconciliation by reacting to the current cluster state and subsequent changes.</li>
<li class="">Reconciliation continues from what is stored in the cluster state, not from
in-memory queues.</li>
</ul>
<p>This is the core of Kratix resiliency: the control plane stores intent, and Kratix
can always resume convergence after a restart.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="reconciliation-and-eventual-consistency">Reconciliation and eventual consistency<a href="#reconciliation-and-eventual-consistency" class="hash-link" aria-label="Direct link to Reconciliation and eventual consistency" title="Direct link to Reconciliation and eventual consistency" translate="no">​</a></h3>
<p>Kratix is an eventually consistent system:</p>
<ul>
<li class="">Changes are acted on asynchronously.</li>
<li class="">Convergence time depends on workflow execution time and external dependencies
(for example, StateStores).</li>
</ul>
<p>Reconciliation happens in two ways:</p>
<ul>
<li class="">
<p><strong>Event-driven reconciliation</strong></p>
<ul>
<li class="">Creating, updating, or deleting a Kratix resource triggers reconciliation.</li>
<li class="">Changes to related resources can also trigger reconciliation.</li>
<li class="">A <a class="" href="/main/reference/resources/reconciliation-labels#manual-reconciliation">manual trigger of reconciliation</a></li>
</ul>
</li>
<li class="">
<p><strong>Periodic reconciliation</strong></p>
<ul>
<li class="">Periodic reconciliation is enabled by default.</li>
<li class="">The interval is configurable at
<a class="" href="/main/reference/kratix-config/config">Kratix config</a>.</li>
<li class="">Periodic reconciliation helps recover from transient failures and makes the
system more robust to missed events.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-workflows-drive-convergence">How workflows drive convergence<a href="#how-workflows-drive-convergence" class="hash-link" aria-label="Direct link to How workflows drive convergence" title="Direct link to How workflows drive convergence" translate="no">​</a></h4>
<p>Workflows defined within Promises produce end state via one or both of the following:</p>
<ul>
<li class=""><strong>Imperative:</strong> making API calls to external services (for example, cloud providers).</li>
<li class=""><strong>Declarative:</strong> generating documents (for example Terraform files) that Kratix
then schedules to different StateStores (for example Git or S3).</li>
</ul>
<p>Workflows are intended to be idempotent so that retries and restarts are safe.</p>
<ul>
<li class="">Declarative output is recorded in-cluster as <code>Work/WorkPlacement</code> resources
(persisted to etcd), which makes it observable and replayable during recovery.</li>
<li class="">Imperative effects persist in the external systems they target, and recovery may
depend on the idempotency and drift handling of those systems and workflows.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="high-availability-ha-design">High availability (HA) design<a href="#high-availability-ha-design" class="hash-link" aria-label="Direct link to High availability (HA) design" title="Direct link to High availability (HA) design" translate="no">​</a></h2>
<p>This section describes how to run Kratix with high availability in a single
Kubernetes cluster.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>What &quot;high availability&quot; means for Kratix</div><div class="admonitionContent_BuS1"><p>Kratix is not a synchronous service with strict per-request availability
expectations. It is a reconciliation system optimized for correctness over
time. In practice, evaluating HA for Kratix means:</p><ul>
<li class="">Can we keep declaring intent during incidents (kube-apiserver available)?</li>
<li class="">Does the platform reliably converge once Kratix and dependencies recover?</li>
</ul><p>While both are important, in many environments, a request being accepted
immediately with clear acknowledgement is a better user outcome than blocking
submission.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="deployment-model">Deployment model<a href="#deployment-model" class="hash-link" aria-label="Direct link to Deployment model" title="Direct link to Deployment model" translate="no">​</a></h3>
<p>Kratix runs as a Kubernetes Deployment.</p>
<ul>
<li class="">You can configure multiple replicas, but only one replica is active at a
time.</li>
<li class="">Kratix uses Kubernetes leader election (implemented via <code>Lease</code> objects), so
a single leader performs reconciliation.</li>
<li class="">If the active replica fails, Kubernetes can restart it, or another replica can
acquire the leader lease and continue processing.</li>
</ul>
<p>This gives fast failover without multiple reconcilers acting on the same state.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="recommended-ha-posture">Recommended HA posture<a href="#recommended-ha-posture" class="hash-link" aria-label="Direct link to Recommended HA posture" title="Direct link to Recommended HA posture" translate="no">​</a></h3>
<ul>
<li class="">
<p><strong>Run multiple replicas</strong></p>
<ul>
<li class="">Multiple replicas reduce time to recovery when the active pod is
rescheduled.</li>
<li class="">Leader election ensures a single active reconciler.</li>
</ul>
</li>
<li class="">
<p><strong>Spread replicas across failure domains</strong></p>
<ul>
<li class="">Use node and zone spreading so a single node or zone outage does not take
out all replicas.</li>
<li class="">Align placement with your cluster availability requirements.</li>
</ul>
</li>
<li class="">
<p><strong>Treat the Kratix pod as disposable</strong></p>
<ul>
<li class="">Design for restarts and rescheduling.</li>
<li class="">Focus availability investment on the Kubernetes control plane, because it
stores the intent Kratix needs to function.</li>
</ul>
</li>
<li class="">
<p><strong>Prioritise Kubernetes control plane availability</strong></p>
<ul>
<li class="">kube-apiserver and etcd availability determine whether intent can be
declared and persisted.</li>
<li class="">Managed Kubernetes offerings often provide well-tested control plane HA
patterns. Validate what your platform provides and what failure modes it
covers.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="multi-active-kratix-control-planes">Multi-active Kratix control planes<a href="#multi-active-kratix-control-planes" class="hash-link" aria-label="Direct link to Multi-active Kratix control planes" title="Direct link to Multi-active Kratix control planes" translate="no">​</a></h3>
<p>Our recommendation is to avoid running two independent Kratix control planes
that both attempt to reconcile the same desired state.</p>
<p>Some teams may still choose this design to meet specific constraints. If so,
be explicit about the operational trade-off and test failure behaviour
thoroughly.</p>
<p>Running multi-active reconcilers against the same desired state can introduce
split-brain behaviour and operational instability:</p>
<ul>
<li class="">conflicting decisions against the same resources and destinations</li>
<li class="">oscillation between states as each reconciler attempts to converge</li>
<li class="">inconsistent reconciliation ordering across controllers and destinations</li>
<li class="">more complex incident response because ownership of a change is harder to
attribute during failures</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>If you believe active-active is required for your setup, please reach out to
Syntasso for a more in-depth discussion of the design.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="failure-modes-and-behaviour">Failure modes and behaviour<a href="#failure-modes-and-behaviour" class="hash-link" aria-label="Direct link to Failure modes and behaviour" title="Direct link to Failure modes and behaviour" translate="no">​</a></h2>
<p>This section describes what continues to work, what pauses, and what to expect
when the system recovers.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="kubernetes-api-unavailable">Kubernetes API unavailable<a href="#kubernetes-api-unavailable" class="hash-link" aria-label="Direct link to Kubernetes API unavailable" title="Direct link to Kubernetes API unavailable" translate="no">​</a></h3>
<p>Impact:</p>
<ul>
<li class="">You cannot create, update, or delete Kratix resources through the Kubernetes
API.</li>
<li class="">Kratix cannot read the cluster state, so it cannot reconcile.</li>
</ul>
<p>What to expect:</p>
<ul>
<li class="">No new intent can be declared until the kube-apiserver is available again.</li>
<li class="">Once it recovers, reconciliation continues fthe rom persisted cluster state.</li>
</ul>
<p>If you place GitOps in front of Kratix Resource Requests, you can still declare
intent by committing changes even while Kubernetes is unavailable. When the
cluster recovers, those changes are applied, and Kratix converges on the new
state. This is supported by the <a class="" href="/ske/integrations/backstage/intro">portal integration</a>
and is good practice if you are driving Kratix solely via an API.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="kratix-unavailable-kubernetes-api-available">Kratix unavailable (Kubernetes API available)<a href="#kratix-unavailable-kubernetes-api-available" class="hash-link" aria-label="Direct link to Kratix unavailable (Kubernetes API available)" title="Direct link to Kratix unavailable (Kubernetes API available)" translate="no">​</a></h3>
<p>Impact:</p>
<ul>
<li class="">You can continue to create, update, and delete Kratix resources.</li>
<li class="">Changes are persisted to etcd.</li>
<li class="">Kratix will not execute intent until it recovers.</li>
<li class="">External running services are unaffected.</li>
</ul>
<p>What pauses while Kratix is unavailable:</p>
<ul>
<li class="">Workflows do not run</li>
<li class="">Scheduling and actuation do not occur</li>
<li class="">Writing outputs to StateStores does not occur</li>
<li class="">Status updates and progress reporting become stale</li>
</ul>
<p>What to expect on recovery:</p>
<ul>
<li class="">Kratix re-lists resources, resumes watching, and continues reconciliation from
persisted intent.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="statestore-unavailable-git-s3">StateStore unavailable (Git, S3)<a href="#statestore-unavailable-git-s3" class="hash-link" aria-label="Direct link to StateStore unavailable (Git, S3)" title="Direct link to StateStore unavailable (Git, S3)" translate="no">​</a></h3>
<p>Impact:</p>
<ul>
<li class="">Kratix cannot write workflow outputs to the StateStore while the dependency is
unavailable.</li>
</ul>
<p>What to expect:</p>
<ul>
<li class="">Workflows still complete successfully and produce outputs that are stored in etcd.</li>
<li class="">Writes to the StateStore are delayed until the StateStore recovers.</li>
<li class="">Once available, Kratix resumes syncing and converges external state.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="external-api-unavailable-called-by-workflows">External API unavailable (called by workflows)<a href="#external-api-unavailable-called-by-workflows" class="hash-link" aria-label="Direct link to External API unavailable (called by workflows)" title="Direct link to External API unavailable (called by workflows)" translate="no">​</a></h3>
<p>Impact:</p>
<ul>
<li class="">Workflows that call the external API may fail, time out, or be delayed.</li>
</ul>
<p>What to expect:</p>
<ul>
<li class="">Failures are surfaced through workflow status.</li>
<li class="">A failed workflow does not affect documents that have already been scheduled
to a StateStore.</li>
<li class="">Convergence resumes once the dependency recovers, subject to workflow retry
behaviour and periodic reconciliation.</li>
<li class="">Workflows must be idempotent so retries are safe.</li>
<li class="">Consider implementing the
<a href="https://martinfowler.com/bliki/CircuitBreaker.html" target="_blank" rel="noopener noreferrer" class="">&quot;Circuit Breaker&quot; pattern</a>
with sensible timeouts and backoff to avoid repeated failing calls during
outages.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="workflow-idempotency">Workflow idempotency<a href="#workflow-idempotency" class="hash-link" aria-label="Direct link to Workflow idempotency" title="Direct link to Workflow idempotency" translate="no">​</a></h3>
<p>Workflows must be idempotent. During normal reconciliation and recovery,
workflows may be re-run after a restore, after controller restarts, or after
external dependencies recover.</p>
<p>When authoring Promises, treat idempotency as a requirement:</p>
<ul>
<li class="">Re-running a workflow converges to the same result</li>
<li class="">External API calls handle retries safely</li>
<li class="">Outputs written to StateStores are safe to apply more than once</li>
</ul>
<p>For more details, see <a class="" href="/main/reference/resources/workflows#idempotency">Workflow idempotency</a>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-to-validate-workflow-idempotency">How to validate workflow idempotency<a href="#how-to-validate-workflow-idempotency" class="hash-link" aria-label="Direct link to How to validate workflow idempotency" title="Direct link to How to validate workflow idempotency" translate="no">​</a></h4>
<p>Use a non-production environment to exercise the same workflow multiple times
against the same inputs:</p>
<ul>
<li class="">Re-run the workflow after a successful run and confirm no unintended changes</li>
<li class="">Simulate a retry after a partial failure and ensure it converges cleanly</li>
<li class="">verify that external system calls are idempotent (for example, create-or-update)</li>
<li class="">Compare outputs written to the StateStore and ensure they are stable</li>
</ul>
<p>For workflows that talk to external systems, consider adding idempotency keys or
deduplication logic on the external side, where available.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="disaster-recovery-dr">Disaster recovery (DR)<a href="#disaster-recovery-dr" class="hash-link" aria-label="Direct link to Disaster recovery (DR)" title="Direct link to Disaster recovery (DR)" translate="no">​</a></h2>
<p>Disaster recovery for Kratix is primarily disaster recovery for the Kubernetes
cluster state that contains Kratix resources.</p>
<p>This page provides DR guidance, not a complete runbook for every environment.
Apply and adapt it to your platform topology, security controls, and
operational model.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="define-targets-with-rto-and-rpo">Define targets with RTO and RPO<a href="#define-targets-with-rto-and-rpo" class="hash-link" aria-label="Direct link to Define targets with RTO and RPO" title="Direct link to Define targets with RTO and RPO" translate="no">​</a></h3>
<p>Define resiliency requirements with explicit RTO and RPO targets.</p>
<ul>
<li class="">
<p><strong>RTO (recovery time objective)</strong></p>
<ul>
<li class="">How long you can tolerate Kratix being unable to execute intent.</li>
<li class="">In practice: how quickly you need workflows and delivery to resume after an
incident.</li>
</ul>
</li>
<li class="">
<p><strong>RPO (recovery point objective)</strong></p>
<ul>
<li class="">How much Kratix state you can tolerate losing, measured as time.</li>
<li class="">For Kratix, this is driven by your backup cadence for Kubernetes resources,
and by whether you also manage intent via GitOps.</li>
</ul>
</li>
</ul>
<p>For Kratix, prioritise RTO/RPO for kube-apiserver and etcd so users can submit
requests and receive acknowledgement quickly. Reconciliation remains eventually
consistent; moderate increases in reconciliation time are often acceptable if
submission and acknowledgement remain available.</p>
<p>RTO influences your restore approach and readiness. RPO influences backup
frequency and scope. Revisit both as your platform architecture and usage
change.</p>
<p>Do not use a single RTO/RPO target for every part of the system. Set stricter
targets for accepting and persisting intent, and separate targets for
reconciliation speed.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="backup-strategy">Backup strategy<a href="#backup-strategy" class="hash-link" aria-label="Direct link to Backup strategy" title="Direct link to Backup strategy" translate="no">​</a></h3>
<p>Use a Kubernetes backup tool that captures cluster resources, including CRDs and
custom resources. Velero is a common choice.</p>
<p>The tool examples on this page are guidance, not a prescriptive runbook. Your exact
backup and restore design depends on your cluster setup, security controls,
GitOps model, and operational constraints.</p>
<p>If you use GitOps to manage Kratix resources, your Git repository is a useful
input source for restoring intent. It does not replace Kubernetes backups
because it does not capture everything required to operate Kratix (for example,
in-cluster credentials and RBAC configuration).</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="control-plane-data-etcd">Control plane data (etcd)<a href="#control-plane-data-etcd" class="hash-link" aria-label="Direct link to Control plane data (etcd)" title="Direct link to Control plane data (etcd)" translate="no">​</a></h3>
<p>etcd is the primary durability boundary for Kratix, because it stores all
Kubernetes resources and their status. Treat etcd backups as a first-class DR
concern.</p>
<ul>
<li class=""><strong>Managed clusters:</strong> cloud and on-prem managed offerings often include
automated etcd snapshots and restore procedures. Validate what your provider
covers (RPO, retention, and restore path) and test restores.</li>
<li class=""><strong>Self-managed clusters:</strong> schedule regular etcd snapshots to off-cluster
storage and rehearse restore procedures as part of DR drills.</li>
</ul>
<p>Velero (and similar tools) back up Kubernetes resources via the API. That is
essential, and combined with etcd snapshots, it can provide broad coverage for
control plane recovery. Choose the DR approach that fits your risk tolerance,
then test and verify it regularly with full restore rehearsals.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-to-back-up">What to back up<a href="#what-to-back-up" class="hash-link" aria-label="Direct link to What to back up" title="Direct link to What to back up" translate="no">​</a></h3>
<p>Ensure your backups include:</p>
<ul>
<li class="">
<p><strong>Kratix CRDs and resource request CRDs</strong></p>
<ul>
<li class="">All Kratix CRDs</li>
<li class="">CRDs created by Promises (the CRDs that back resource requests, for example,
<code>redis.marketplace.kratix.io</code>)</li>
<li class="">Core Kratix CRDs:<!-- -->
<ul>
<li class="">bucketstatestores.platform.kratix.io</li>
<li class="">destinations.platform.kratix.io</li>
<li class="">gitstatestores.platform.kratix.io</li>
<li class="">healthrecords.platform.kratix.io</li>
<li class="">promisereleases.platform.kratix.io</li>
<li class="">promiserevisions.platform.kratix.io</li>
<li class="">promises.platform.kratix.io</li>
<li class="">resourcebindings.platform.kratix.io</li>
<li class="">workplacements.platform.kratix.io</li>
<li class="">works.platform.kratix.io</li>
</ul>
</li>
</ul>
</li>
<li class="">
<p><strong>Workflow-related resources</strong></p>
<ul>
<li class="">Jobs</li>
<li class="">ServiceAccounts</li>
<li class="">Roles, RoleBindings, ClusterRoles, and ClusterRoleBindings</li>
<li class="">ConfigMaps required by workflows</li>
</ul>
</li>
<li class="">
<p><strong>Secrets used by Kratix and workflows</strong></p>
<ul>
<li class="">StateStore credentials</li>
<li class="">external API credentials</li>
</ul>
</li>
<li class="">
<p><strong>Other resources workflows depend on</strong></p>
<ul>
<li class="">Any platform cluster resources that workflows reference or query (for
example, via <code>kubectl get</code> or API calls)</li>
</ul>
</li>
</ul>
<p>The exact backup scope varies by environment. Keep an explicit inventory of
what Kratix and your workflows depend on, and update it as dependencies change.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Restoring Kubernetes resources can overwrite existing state. Test restores in a
non-production environment and ensure you understand what will be replaced
before restoring into a live cluster. Perform restores using an environment-specific,
tested runbook.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="restore-approach">Restore approach<a href="#restore-approach" class="hash-link" aria-label="Direct link to Restore approach" title="Direct link to Restore approach" translate="no">​</a></h3>
<p>Your restore approach depends on the incident type:</p>
<ul>
<li class="">
<p><strong>Restore into an existing cluster</strong></p>
<ul>
<li class="">Use this when the cluster still exists but has lost state or has been
partially corrupted.</li>
</ul>
</li>
<li class="">
<p><strong>Recreate the cluster and restore</strong></p>
<ul>
<li class="">Use this when the cluster is lost (for example, a full cluster outage).</li>
<li class="">Restore backups into the new cluster, then let Kratix resume reconciliation.</li>
</ul>
</li>
</ul>
<p>Restore sequencing matters. If reconciliation tools resume before the cluster state
is fully restored, they may prune or overwrite resources.</p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>GitOps prune risk during restore and migration</div><div class="admonitionContent_BuS1"><p>External GitOps reconcilers handle source outages differently. When a
reconciler comes back online, and its source repository is empty, incomplete, or
stale, some tools can interpret the missing manifests as intentional removals
and automatically prune the corresponding live resources</p><p>This can happen during DR recovery, when platform and GitOps components fail at
the same time, or during repository migrations (for example, moving from GitHub
to GitLab) where the new repository is briefly empty.</p></div></div>
<p>Use a tested restore order for your platform. An example order might be:</p>
<ul>
<li class="">Temporarily pause GitOps reconciliation and other automation that can apply or
prune resources</li>
<li class="">Restore control plane state and required resources (including CRDs, secrets,
RBAC, and Kratix resources)</li>
<li class="">Run dry-run or preflight checks where your tooling supports them</li>
<li class="">Verify restored state and controller health before re-enabling reconciliation</li>
<li class="">Resume automation in stages and monitor for unexpected prune or drift events</li>
</ul>
<p>The precise sequence and safeguards vary by environment. Validate your order in
regular DR exercises and update this when tooling or architecture changes.</p>
<p>After a restore, verify that Kratix can:</p>
<ul>
<li class="">List and watch its resources</li>
<li class="">Acquire leader election and begin reconciliation</li>
<li class="">Continue convergence without manual state repair</li>
</ul>
<p>Treat backup restore as an operational capability, not a one-off task. Rehearse
end-to-end recovery regularly and update the runbook as your environment
changes.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="statestore-recovery-and-resync">StateStore recovery and resync<a href="#statestore-recovery-and-resync" class="hash-link" aria-label="Direct link to StateStore recovery and resync" title="Direct link to StateStore recovery and resync" translate="no">​</a></h2>
<p>A StateStore is an external destination where Kratix writes workflow outputs,
such as a Git repository or an S3 bucket.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="periodic-rewrites">Periodic rewrites<a href="#periodic-rewrites" class="hash-link" aria-label="Direct link to Periodic rewrites" title="Direct link to Periodic rewrites" translate="no">​</a></h3>
<p>Kratix periodically rewrites outputs to StateStores to ensure external state
remains up to date.</p>
<ul>
<li class="">The sync interval is configurable.</li>
<li class="">The default interval is 10 hours.</li>
<li class="">You can trigger a rewrite manually by labelling the relevant resource.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="recovering-from-statestore-loss">Recovering from StateStore loss<a href="#recovering-from-statestore-loss" class="hash-link" aria-label="Direct link to Recovering from StateStore loss" title="Direct link to Recovering from StateStore loss" translate="no">​</a></h3>
<p>If a Git repository or S3 bucket is lost or replaced:</p>
<ul>
<li class="">Recreate the repository or bucket and update the StateStore configuration if
required.</li>
<li class="">Trigger a resync (or wait for the periodic rewrite) so Kratix repopulates the
destination from the desired state stored in Kubernetes.</li>
<li class="">Pause GitOps reconcilers until the destination is repopulated and validated
against the expected state.</li>
<li class="">Avoid enabling prune behaviour until the repository contents are complete and
stable for your environment.</li>
<li class="">Resume reconciliation in stages and monitor for drift, because a large gap
between cluster state and repository state can take time to converge safely.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="recovery-checklist">Recovery checklist<a href="#recovery-checklist" class="hash-link" aria-label="Direct link to Recovery checklist" title="Direct link to Recovery checklist" translate="no">​</a></h2>
<p>Use this as a post-restore validation checklist. Adjust to match your platform
and keep it in sync with environment changes.</p>
<ul>
<li class="">Kubernetes API writable and etcd healthy</li>
<li class="">Kratix CRDs and namespaces restored</li>
<li class="">Secrets and ConfigMaps restored (including StateStore credentials)</li>
<li class="">RBAC restored (Roles, ClusterRoles, and bindings)</li>
<li class="">Kratix Deployment running and leader election healthy</li>
<li class="">Controllers reconciling and status progressing</li>
<li class=""><code>Work</code> and <code>WorkPlacement</code> resources present and consistent</li>
<li class="">StateStore resync completed and confirmed</li>
<li class="">GitOps source repositories populated with expected manifests before
reconciliation and prune are re-enabled</li>
<li class="">GitOps toolkit healthy (for example, Flux <code>Kustomization</code>s or Argo CD Applications)</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="related-docs">Related docs<a href="#related-docs" class="hash-link" aria-label="Direct link to Related docs" title="Direct link to Related docs" translate="no">​</a></h2>
<ul>
<li class=""><a class="" href="/main/reference/kratix-config/config">Kratix config</a></li>
<li class=""><a class="" href="/main/reference/destinations/intro">Destinations</a></li>
<li class=""><a class="" href="/main/reference/statestore/intro">StateStores</a></li>
<li class=""><a class="" href="/main/reference/resources/workflows#idempotency">Workflow idempotency</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/syntasso/kratix-docs/tree/main/docs/main/05-platform-concepts/01-resiliency.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/category/platform-concepts"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Platform Concepts</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/main/platform-concepts/kratix-resources"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#resiliency-model-overview" class="table-of-contents__link toc-highlight">Resiliency model overview</a></li><li><a href="#how-kratix-stores-and-acts-on-intent" class="table-of-contents__link toc-highlight">How Kratix stores and acts on intent</a><ul><li><a href="#where-kratix-state-lives" class="table-of-contents__link toc-highlight">Where Kratix state lives</a></li><li><a href="#persisted-intent-and-restart-behaviour" class="table-of-contents__link toc-highlight">Persisted intent and restart behaviour</a></li><li><a href="#reconciliation-and-eventual-consistency" class="table-of-contents__link toc-highlight">Reconciliation and eventual consistency</a></li></ul></li><li><a href="#high-availability-ha-design" class="table-of-contents__link toc-highlight">High availability (HA) design</a><ul><li><a href="#deployment-model" class="table-of-contents__link toc-highlight">Deployment model</a></li><li><a href="#recommended-ha-posture" class="table-of-contents__link toc-highlight">Recommended HA posture</a></li><li><a href="#multi-active-kratix-control-planes" class="table-of-contents__link toc-highlight">Multi-active Kratix control planes</a></li></ul></li><li><a href="#failure-modes-and-behaviour" class="table-of-contents__link toc-highlight">Failure modes and behaviour</a><ul><li><a href="#kubernetes-api-unavailable" class="table-of-contents__link toc-highlight">Kubernetes API unavailable</a></li><li><a href="#kratix-unavailable-kubernetes-api-available" class="table-of-contents__link toc-highlight">Kratix unavailable (Kubernetes API available)</a></li><li><a href="#statestore-unavailable-git-s3" class="table-of-contents__link toc-highlight">StateStore unavailable (Git, S3)</a></li><li><a href="#external-api-unavailable-called-by-workflows" class="table-of-contents__link toc-highlight">External API unavailable (called by workflows)</a></li><li><a href="#workflow-idempotency" class="table-of-contents__link toc-highlight">Workflow idempotency</a></li></ul></li><li><a href="#disaster-recovery-dr" class="table-of-contents__link toc-highlight">Disaster recovery (DR)</a><ul><li><a href="#define-targets-with-rto-and-rpo" class="table-of-contents__link toc-highlight">Define targets with RTO and RPO</a></li><li><a href="#backup-strategy" class="table-of-contents__link toc-highlight">Backup strategy</a></li><li><a href="#control-plane-data-etcd" class="table-of-contents__link toc-highlight">Control plane data (etcd)</a></li><li><a href="#what-to-back-up" class="table-of-contents__link toc-highlight">What to back up</a></li><li><a href="#restore-approach" class="table-of-contents__link toc-highlight">Restore approach</a></li></ul></li><li><a href="#statestore-recovery-and-resync" class="table-of-contents__link toc-highlight">StateStore recovery and resync</a><ul><li><a href="#periodic-rewrites" class="table-of-contents__link toc-highlight">Periodic rewrites</a></li><li><a href="#recovering-from-statestore-loss" class="table-of-contents__link toc-highlight">Recovering from StateStore loss</a></li></ul></li><li><a href="#recovery-checklist" class="table-of-contents__link toc-highlight">Recovery checklist</a></li><li><a href="#related-docs" class="table-of-contents__link toc-highlight">Related docs</a></li></ul></div></div></div></div></main></div></div></div><img id="docs-scarf-pixel" style="height:1px;width:1px" referrerpolicy="no-referrer-when-downgrade" src="https://static.scarf.sh/a.png?x-pxid=2f7703a4-9013-4c6f-b09e-894a5f3f42d6"><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Getting Started</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://kratix.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Kratix<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/syntasso/kratix" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://syntasso.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Syntasso<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://app.termly.io/policy-viewer/policy.html?policyUUID=904a9e3b-575b-4156-8377-ed6ec8829d77" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Syntasso Limited. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>