"use strict";(self.webpackChunkkratix_docs=self.webpackChunkkratix_docs||[]).push([[7873],{28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>t});var r=i(96540);const s={},o=r.createContext(s);function a(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(o.Provider,{value:n},e.children)}},50316:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>l,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"main/reference/promise-upgrade/resource-bindings","title":"Resource Bindings","description":"Documentation for the Kratix Resource Binding Custom Resource","source":"@site/docs/main/03-reference/16-promise-upgrade/02-resource-bindings.md","sourceDirName":"main/03-reference/16-promise-upgrade","slug":"/main/reference/promise-upgrade/resource-bindings","permalink":"/main/reference/promise-upgrade/resource-bindings","draft":false,"unlisted":false,"editUrl":"https://github.com/syntasso/kratix-docs/tree/main/docs/main/03-reference/16-promise-upgrade/02-resource-bindings.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"description":"Documentation for the Kratix Resource Binding Custom Resource","title":"Resource Bindings","sidebar_label":"Resource Bindings"},"sidebar":"mainSidebar","previous":{"title":"Promise Revisions","permalink":"/main/reference/promise-upgrade/promise-revisions"},"next":{"title":"Health Records","permalink":"/main/reference/healthrecord"}}');var s=i(74848),o=i(28453);const a={description:"Documentation for the Kratix Resource Binding Custom Resource",title:"Resource Bindings",sidebar_label:"Resource Bindings"},t="Resource Bindings",c={},d=[{value:"Upgrading a Resource Request",id:"upgrading-a-resource-request",level:2},{value:"Deleting a Resource Binding",id:"deleting-a-resource-binding",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"resource-bindings",children:"Resource Bindings"})}),"\n",(0,s.jsxs)(n.p,{children:["Resource Bindings bind a Resource Request to a ",(0,s.jsx)(n.a,{href:"./promise-revisions",children:"Promise Revision"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"When a Resource Request is made, Kratix reconciles this Resource using the latest Promise Revision.\nKratix will automatically create a Resource Binding for this Resource.\nThis Binding consists of a reference to the Resource Request and the Promise Revision that the Resource is reconciled at."}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"Resource Bindings are managed by Kratix. As a Kratix users, you will not need to create or delete Resource\nBindings manually."})}),"\n",(0,s.jsx)(n.p,{children:"A Resource Binding looks like this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"apiVersion: platform.kratix.io/v1alpha1\nkind: ResourceBinding\nmetadata:\n  labels:\n    kratix.io/promise-name: redis # name of the Promise\n    kratix.io/resource-name: example # name of the Resource\n  name: example-redis-e7f90\n  namespace: default # Resource Bindings are created in the same namespace as the Resource itself\nspec:\n  promiseRef:\n    name: redis # name of the Promise\n  resourceRef:\n    name: example # name of the Resource\n    namespace: default # namespace of the Resource\n  version: v0.1.0 # version of the Promise this Resource is associated to\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"When updating a Resource Request, Kratix will reconcile the Resource using the Promise Revision recorded in the Resource Binding.\nIf you want the Resource to be reconciled using a different Promise Revision, you need to update the Resource Binding."})}),"\n",(0,s.jsx)(n.h2,{id:"upgrading-a-resource-request",children:"Upgrading a Resource Request"}),"\n",(0,s.jsxs)(n.p,{children:["To update the Promise Revision that a Resource Request is reconciled at, you can update its Resource Binding.\nTo find the corresponding Resource Binding, you can run ",(0,s.jsx)(n.code,{children:"kubectl"})," command with label filters."]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"Resource Bindings have a 1:1 relationship to a resource request."})}),"\n",(0,s.jsxs)(n.p,{children:["For example, to look for the Resource Binding of a ",(0,s.jsx)(n.code,{children:"redis"})," Resource Request with name ",(0,s.jsx)(n.code,{children:"example"})," in namespace ",(0,s.jsx)(n.code,{children:"default"}),", run:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl -n default get resourcebindings -l kratix.io/promise-name=redis -l kratix.io/resource-name=example\n\nNAME                  RESOURCE   PROMISE   VERSION\nexample-redis-e7f90   example    redis     v0.1.0\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Then, update ",(0,s.jsx)(n.code,{children:".spec.version"})," of the Binding:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"apiVersion: platform.kratix.io/v1alpha1\nkind: ResourceBinding\nmetadata:\n  name: example-resource\nspec:\n  ...\n  version: v0.2.0 # update to upgrade Resource Requests\n"})}),"\n",(0,s.jsx)(n.p,{children:"Following this update, Kratix will automatically reconcile and run the Resource Configure workflow for the Resource Request."}),"\n",(0,s.jsx)(n.h2,{id:"deleting-a-resource-binding",children:"Deleting a Resource Binding"}),"\n",(0,s.jsx)(n.p,{children:"Resource Bindings are managed by Kratix. It will be automatically cleaned up by Kratix when the Resource Request is removed.\nIf you remove a Resource Binding for an existing Resource Request, Kratix will automatically recreate the Binding."})]})}function l(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);