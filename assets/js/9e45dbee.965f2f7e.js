"use strict";(self.webpackChunkkratix_docs=self.webpackChunkkratix_docs||[]).push([[2168],{192:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"ske/installing-ske/backup-and-restore","title":"Backup and restore","description":"Backing up and restoring your SKE instance","source":"@site/docs/ske/01-installing-ske/21-backup-and-restore.mdx","sourceDirName":"ske/01-installing-ske","slug":"/ske/installing-ske/backup-and-restore","permalink":"/ske/installing-ske/backup-and-restore","draft":false,"unlisted":false,"editUrl":"https://github.com/syntasso/kratix-docs/tree/main/docs/ske/01-installing-ske/21-backup-and-restore.mdx","tags":[],"version":"current","sidebarPosition":21,"frontMatter":{"title":"Backup and restore","description":"Backing up and restoring your SKE instance"},"sidebar":"skeSidebar","previous":{"title":"Upgrades","permalink":"/ske/installing-ske/upgrades"},"next":{"title":"Migrating from Kratix to SKE","permalink":"/ske/installing-ske/migrating-from-kratix"}}');var s=n(4848),o=n(8453);const i={title:"Backup and restore",description:"Backing up and restoring your SKE instance"},a=void 0,c={},l=[];function d(e){const r={a:"a",code:"code",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.p,{children:"Backing up and restoring your SKE instance is a critical part of ensuring the availability and durability of your data. It also provides a safety net for when you need to recover from a disaster."}),"\n",(0,s.jsx)(r.p,{children:"The backup and restore procedure will be different depending on where your Platform cluster is running. Below is the documentation for the major providers:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://aws.amazon.com/blogs/containers/backup-and-restore-your-amazon-eks-cluster-resources-using-velero/",children:"Amazon EKS"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://cloud.google.com/kubernetes-engine/docs/add-on/backup-for-gke/concepts/backup-for-gke",children:"Google GKE"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/azure/backup/azure-kubernetes-service-cluster-backup",children:"Microsoft AKS"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://docs.redhat.com/en/documentation/openshift_container_platform/4.19/html/backup_and_restore/control-plane-backup-and-restore",children:"RedHat OpenShift"})}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"When restoring from a backup, keep in mind that the ordering of how the SKE objects are applied is important (the same applies for Flux and Cert Manager). The controller pods will not successfully start in the absence of their CRDs. Similarly, the resource requests will not successfully apply in the absence of the corresponding Promises."}),"\n",(0,s.jsxs)(r.p,{children:["For Velero-based backups, the right order can be enforced with the ",(0,s.jsx)(r.code,{children:"--include-resources"})," flag (for example, ",(0,s.jsx)(r.code,{children:"--include-resources=customresourcedefinitions"}),"). Check the ",(0,s.jsx)(r.a,{href:"https://velero.io/docs/main/resource-filtering",children:"Velero Resource Filtering"})," docs for more detailed explanation."]}),"\n",(0,s.jsxs)(r.p,{children:["For GKE, it is possible to define pairs of resources that must be restored in a given order. Check ",(0,s.jsx)(r.a,{href:"https://cloud.google.com/kubernetes-engine/docs/add-on/backup-for-gke/how-to/restore-order",children:"the GKE docs"})," for more details."]}),"\n",(0,s.jsx)(r.p,{children:"Ordering cannot be enforced by the Velero-backed Azure restore. Instead the restore needs to be applied more than once."})]})}function u(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>a});var t=n(6540);const s={},o=t.createContext(s);function i(e){const r=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(o.Provider,{value:r},e.children)}}}]);