"use strict";(self.webpackChunkkratix_docs=self.webpackChunkkratix_docs||[]).push([[7616],{28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var s=n(96540);const i={},a=s.createContext(i);function o(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(a.Provider,{value:t},e.children)}},59683:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"main/reference/destinations/destination-status-events","title":"Destination Status and Events","description":"Understand the status conditions and events of a Destination.","source":"@site/docs/main/03-reference/13-destinations/03-status-events.mdx","sourceDirName":"main/03-reference/13-destinations","slug":"/main/reference/destinations/status-events","permalink":"/main/reference/destinations/status-events","draft":false,"unlisted":false,"editUrl":"https://github.com/syntasso/kratix-docs/tree/main/docs/main/03-reference/13-destinations/03-status-events.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Destination Status and Events","description":"Understand the status conditions and events of a Destination.","sidebar_label":"Status and Events","id":"destination-status-events","slug":"/main/reference/destinations/status-events","keywords":["destination status","destination events","destination conditions"]},"sidebar":"mainSidebar","previous":{"title":"Managing Multiple Destinations","permalink":"/main/reference/destinations/multidestination-management"},"next":{"title":"State Stores","permalink":"/main/reference/statestore/intro"}}');var i=n(74848),a=n(28453);const o={title:"Destination Status and Events",description:"Understand the status conditions and events of a Destination.",sidebar_label:"Status and Events",id:"destination-status-events",slug:"/main/reference/destinations/status-events",keywords:["destination status","destination events","destination conditions"]},r=void 0,d={},c=[{value:"Conditions",id:"conditions",level:2},{value:"Events",id:"events",level:2}];function l(e){const t={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"Kratix follows the Kubernetes convention of using status conditions and events to report Destination health.\nDestinations are considered ready when Kratix can write test documents to the backing State Store."}),"\n",(0,i.jsx)(t.h2,{id:"conditions",children:"Conditions"}),"\n",(0,i.jsxs)(t.p,{children:["Destinations expose a ",(0,i.jsx)(t.code,{children:"Ready"})," condition that reflects the latest health check:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"TestDocumentsWritten"})," \u2013 test documents were written to the State Store successfully."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"ReconciledSuccessfully"})," \u2013 init workloads are disabled, so no test documents are written."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"StateStoreWriteFailed"})," \u2013 Kratix could not write the test documents."]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["The test documents include ",(0,i.jsx)(t.code,{children:"dependencies/kratix-canary-namespace.yaml"})," and ",(0,i.jsx)(t.code,{children:"resources/kratix-canary-configmap.yaml"}),".\nWhen the ",(0,i.jsx)(t.code,{children:"Ready"})," condition is ",(0,i.jsx)(t.code,{children:"True"})," and a worker cluster is reconciling the Destination, you will see a\n",(0,i.jsx)(t.code,{children:"kratix-worker-system"})," namespace and a ",(0,i.jsx)(t.code,{children:"kratix-info"})," configmap on the target cluster."]}),"\n",(0,i.jsx)(t.p,{children:"Example:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"$ kubectl describe destinations.platform.kratix.io worker-1\nName:         worker-1\n...\nStatus:\n  Conditions:\n    Last Transition Time:  2025-03-04T15:26:21Z\n    Message:               Test documents written to State Store\n    Reason:                TestDocumentsWritten\n    Status:                True\n    Type:                  Ready\n"})}),"\n",(0,i.jsx)(t.h2,{id:"events",children:"Events"}),"\n",(0,i.jsx)(t.p,{children:"Destinations emit the following events:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"DestinationReady"})," (",(0,i.jsx)(t.code,{children:"Normal"}),") \u2013 the Destination is ready. If init workloads are disabled, the message notes that\nno init workloads were written."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"DestinationNotReady"})," (",(0,i.jsx)(t.code,{children:"Warning"}),") \u2013 writing test documents failed; the message includes the error."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Inspect events with:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"kubectl describe destinations.platform.kratix.io <name>\n"})})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);