"use strict";(self.webpackChunkkratix_docs=self.webpackChunkkratix_docs||[]).push([[4207],{4960:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"ske/kratix/ske-operator","title":"SKE Operator","description":"Documentation about the SKE Operator","source":"@site/docs/ske/01-kratix/05-ske-operator.mdx","sourceDirName":"ske/01-kratix","slug":"/ske/kratix/ske-operator","permalink":"/ske/kratix/ske-operator","draft":false,"unlisted":false,"editUrl":"https://github.com/syntasso/kratix-docs/tree/main/docs/ske/01-kratix/05-ske-operator.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"SKE Operator","description":"Documentation about the SKE Operator"},"sidebar":"skeSidebar","previous":{"title":"Migrating from Kratix to SKE","permalink":"/ske/kratix/configuring-ske/migrating-from-kratix"},"next":{"title":"SKE Health Agent","permalink":"/ske/kratix/ske-health-agent"}}');var i=n(4848),a=n(8453);const s={title:"SKE Operator",description:"Documentation about the SKE Operator"},o=void 0,l={},d=[{value:"Features",id:"features",level:2},{value:"The Kratix Custom Resource Definition (CRD)",id:"the-kratix-custom-resource-definition-crd",level:2},{value:"Managing Kratix via the SKE Operator",id:"managing-kratix-via-the-ske-operator",level:2},{value:"Install",id:"install",level:3},{value:"Upgrade",id:"upgrade",level:3}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"The SKE Operator provides full lifecycle support for Syntasso Kratix Enterprise (SKE) and is the\nrecommended approach for installing and managing your SKE installation."}),"\n",(0,i.jsxs)(t.p,{children:["The operator has its own ",(0,i.jsx)(t.a,{href:"../releases/ske-operator",children:"releases"})," and it manages instances of\nSKE as defined by a ",(0,i.jsx)(t.a,{href:"#the-kratix-custom-resource-definition-crd",children:"Kratix Custom Resource"}),"."]}),"\n",(0,i.jsxs)(t.admonition,{type:"info",children:[(0,i.jsxs)(t.p,{children:["While SKE is can be installed directly via the ",(0,i.jsx)(t.a,{href:"../releases/ske#overview",children:"released SKE distribution\nmanifests"}),", we ",(0,i.jsx)(t.strong,{children:"highly recommend"})," that you use the SKE Operator."]}),(0,i.jsx)(t.p,{children:"Using the Operator will reduce the workload of maintaining SKE, and all future operational\nfeatures will only be available via the Operator."})]}),"\n",(0,i.jsx)(t.h2,{id:"features",children:"Features"}),"\n",(0,i.jsx)(t.p,{children:"The SKE Operator will:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Install a Kratix instance into your cluster, including dependencies"}),"\n",(0,i.jsxs)(t.li,{children:["Prevent drift of Kratix resources by continuously reconciling them against the declared\n",(0,i.jsx)(t.a,{href:"../releases/ske#overview",children:"SKE distribution"})]}),"\n",(0,i.jsx)(t.li,{children:"Validate SKE is in a healthy state before upgrading with pre-upgrade checks"}),"\n",(0,i.jsx)(t.li,{children:"Roll out an upgrade to the next minor version at the latest patch"}),"\n",(0,i.jsx)(t.li,{children:"Provide information about the status of the upgrade"}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"the-kratix-custom-resource-definition-crd",children:"The Kratix Custom Resource Definition (CRD)"}),"\n",(0,i.jsx)(t.p,{children:"The Kratix CRD is the resource definition corresponding to a Kratix installation. This\nresource is managed by the SKE Operator."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",children:"apiVersion: platform.syntasso.io/v1alpha1\nkind: Kratix\nmetadata:\n  name: my-kratix\nspec:\n  version: vX.Y.Z # The desired version of SKE, can be set to latest\n  deploymentConfig:\n    resources: # set to customize resource requests&limits for kratix deployment\n      # limits and requests must be valid Kubernetes resource quantities\n      limits:\n        memory:\n        cpu:\n      requests:\n        memory:\n        cpu:\n"})}),"\n",(0,i.jsxs)(t.p,{children:["The Kratix resource is the owner of all resources installed as part of the ",(0,i.jsx)(t.a,{href:"../releases/ske#overview",children:"SKE\ndistribution"}),", and ensures that their state always matches the\ndefinition in the distribution manifest."]}),"\n",(0,i.jsx)(t.h2,{id:"managing-kratix-via-the-ske-operator",children:"Managing Kratix via the SKE Operator"}),"\n",(0,i.jsx)(t.h3,{id:"install",children:"Install"}),"\n",(0,i.jsxs)(t.p,{children:["Syntasso Kratix Enterprise supports many ways of installing a Kratix instance. See\n",(0,i.jsx)(t.a,{href:"./configuring-ske/intro",children:"Configuring SKE"})," for details."]}),"\n",(0,i.jsx)(t.h3,{id:"upgrade",children:"Upgrade"}),"\n",(0,i.jsx)(t.p,{children:"To upgrade the SKE instance, you can apply a new version to the Kratix CRD:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",children:"apiVersion: platform.syntasso.io/v1alpha1\nkind: Kratix\nmetadata:\n  name: my-kratix\nspec:\n  version: latest # Or new desired version\n"})}),"\n",(0,i.jsxs)(t.admonition,{type:"tip",children:[(0,i.jsxs)(t.p,{children:["If you set the ",(0,i.jsx)(t.code,{children:"spec.version"})," to ",(0,i.jsx)(t.code,{children:"latest"}),", the SKE Operator may automatically\nupgrade your Kratix instance to the latest compatible version of SKE, whenever a\nnew version is available and a reconciliation loop is triggered."]}),(0,i.jsx)(t.p,{children:"At this moment, the SKE Operator will not automatically check for new versions."})]}),"\n",(0,i.jsx)(t.p,{children:"By default, the SKE Operator will perform the following steps:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Validate that the current Kratix installation is in a healthy state."}),"\n",(0,i.jsx)(t.li,{children:"Upgrade your Kratix Deployment to the next compatible version."}),"\n",(0,i.jsx)(t.li,{children:"Wait for the Kratix Deployment to become healthy (ready and available)."}),"\n",(0,i.jsx)(t.li,{children:"Repeat the above steps until the desired version is reached."}),"\n"]}),"\n",(0,i.jsxs)(t.admonition,{type:"info",children:[(0,i.jsx)(t.p,{children:"The Operator will stop the upgrade process if:"}),(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"A new major is reached, or"}),"\n",(0,i.jsx)(t.li,{children:"No valid upgrade path is found."}),"\n"]}),(0,i.jsx)(t.p,{children:"Patch versions on the same minor can be upgraded without restrictions."}),(0,i.jsx)(t.p,{children:"Downgrades are not currently supported by the SKE Operator."})]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>o});var r=n(6540);const i={},a=r.createContext(i);function s(e){const t=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(a.Provider,{value:t},e.children)}}}]);