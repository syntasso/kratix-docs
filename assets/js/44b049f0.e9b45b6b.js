"use strict";(self.webpackChunkkratix_docs=self.webpackChunkkratix_docs||[]).push([[8138],{2845:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"ske/kratix/configuring-ske/via-ske-cli","title":"Via SKE CLI","description":"Installing Syntasso Kratix Enterprise via the SKE CLI","source":"@site/docs/ske/01-kratix/10-configuring-ske/10-via-ske-cli.mdx","sourceDirName":"ske/01-kratix/10-configuring-ske","slug":"/ske/kratix/configuring-ske/via-ske-cli","permalink":"/ske/kratix/configuring-ske/via-ske-cli","draft":false,"unlisted":false,"editUrl":"https://github.com/syntasso/kratix-docs/tree/main/docs/ske/01-kratix/10-configuring-ske/10-via-ske-cli.mdx","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"title":"Via SKE CLI","description":"Installing Syntasso Kratix Enterprise via the SKE CLI"},"sidebar":"skeSidebar","previous":{"title":"Introduction","permalink":"/ske/kratix/configuring-ske/intro"},"next":{"title":"Via Helm","permalink":"/ske/kratix/configuring-ske/via-helm"}}');var t=i(4848),r=i(8453);const a={title:"Via SKE CLI",description:"Installing Syntasso Kratix Enterprise via the SKE CLI"},l=void 0,o={},c=[{value:"Installing the SKE CLI",id:"installing-the-ske-cli",level:2},{value:"Installing SKE",id:"installing-ske",level:2},{value:"Verify the installation",id:"verify-the-installation",level:3},{value:"Upgrades",id:"upgrades",level:2},{value:"Upgrade checks",id:"upgrade-checks",level:3},{value:"Timeouts",id:"timeouts",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"The easiest way to get started with SKE is to use the SKE CLI."}),"\n",(0,t.jsx)(n.p,{children:"The CLI will install the SKE Operator and configure it to deploy SKE on your cluster."}),"\n",(0,t.jsx)(n.p,{children:"To install SKE on your Kubernetes cluster via the CLI, follow the steps below."}),"\n",(0,t.jsxs)(n.admonition,{type:"info",children:[(0,t.jsxs)(n.p,{children:["The SKE CLI needs access to the private registry which Syntasso Kratix Enterprise images\nare distributed through. Support for installing SKE in ",(0,t.jsx)(n.strong,{children:"air-gapped environments"})," instead\nusing the SKE CLI is coming soon."]}),(0,t.jsxs)(n.p,{children:["In the meantime, you can follow the ",(0,t.jsx)(n.a,{href:"./air-gapped",children:"setup for air-gapped environments"}),"\ninstructions, and then ",(0,t.jsx)(n.a,{href:"./via-helm",children:"install using Helm"})," or by ",(0,t.jsx)(n.a,{href:"./via-manifest",children:"directly applying the manifests"}),"."]})]}),"\n",(0,t.jsx)(n.h2,{id:"installing-the-ske-cli",children:"Installing the SKE CLI"}),"\n",(0,t.jsxs)(n.p,{children:["Instructions for installing the SKE CLI can be found ",(0,t.jsx)(n.a,{href:"../../ske-cli/ske-cli-intro#installation",children:"here"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"installing-ske",children:"Installing SKE"}),"\n",(0,t.jsx)(n.p,{children:"To install the SKE Operator and a SKE instance, run:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"ske install --access-token $SKE_LICENSE_TOKEN\n"})}),"\n",(0,t.jsxs)(n.admonition,{type:"info",children:[(0,t.jsxs)(n.p,{children:["By default Syntasso Kratix Enterprise requires ",(0,t.jsx)(n.code,{children:"cert-manager"})," to be installed on\nthe cluster. Please refer to ",(0,t.jsx)(n.a,{href:"https://cert-manager.io/",children:"its documentation for installation\ninstructions"}),"."]}),(0,t.jsxs)(n.p,{children:["If you wish to install SKE without ",(0,t.jsx)(n.code,{children:"cert-manager"}),", you can do so by following the\n",(0,t.jsx)(n.a,{href:"./via-helm#custom-certs",children:"Helm Installation instructions"}),"."]})]}),"\n",(0,t.jsx)(n.h3,{id:"verify-the-installation",children:"Verify the installation"}),"\n",(0,t.jsx)(n.p,{children:"Once installation is complete you can verify what has been installed by running:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ske get version\n"})}),"\n",(0,t.jsx)(n.p,{children:"You should see the following output (or similar):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:"Latest Available:\nSKE Operator: v0.2.0; SKE Deployment: v0.3.0\n\nDeployed:\nSKE Operator: v0.2.0; SKE Deployment: v0.3.0\n"})}),"\n",(0,t.jsx)(n.p,{children:"To verify that the Operator and SKE are healthy, run the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl get deployments.apps --namespace kratix-platform-system\n"})}),"\n",(0,t.jsx)(n.p,{children:"You should see the following output:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:"NAME                                 READY   UP-TO-DATE   AVAILABLE   AGE\nkratix-platform-controller-manager   1/1     1            1           1h\nske-operator-controller-manager      1/1     1            1           1h\n"})}),"\n",(0,t.jsxs)(n.p,{children:["You can now proceed with the configuration of Kratix (i.e. registering destinations or\ninstalling promises). For that, refer to the ",(0,t.jsx)(n.a,{href:"/category/guides",children:"appropriate guide"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"upgrades",children:"Upgrades"}),"\n",(0,t.jsx)(n.p,{children:"To upgrade your SKE instance via the CLI, you can run:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:"ske upgrade\n"})}),"\n",(0,t.jsx)(n.p,{children:"By default, the SKE Operator will perform the following steps:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Run the pre-upgrade checks to check that Kratix is safe to upgrade in its current state."}),"\n",(0,t.jsx)(n.li,{children:"Upgrade your Kratix Deployment to the new version."}),"\n",(0,t.jsx)(n.li,{children:"Wait for the Kratix Deployment to become healthy (ready and available)."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"upgrade-checks",children:"Upgrade checks"}),"\n",(0,t.jsxs)(n.p,{children:["The SKE Operator will perform ",(0,t.jsx)(n.a,{href:"../ske-operator#pre-upgrade-checks",children:"pre-upgrade checks"})," as part of the upgrade flow."]}),"\n",(0,t.jsxs)(n.p,{children:["To skip these checks, you can use the ",(0,t.jsx)(n.code,{children:"--skip-all-checks"})," flag when starting an upgrade:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:"ske upgrade --skip-all-checks\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsx)(n.p,{children:"Skipping checks can be useful when you need to upgrade SKE while its current state is\nunhealthy."})}),"\n",(0,t.jsx)(n.h3,{id:"timeouts",children:"Timeouts"}),"\n",(0,t.jsxs)(n.p,{children:["The SKE CLI has a default 5-minute timeout for monitoring an upgrade. This can be\nconfigured by using the ",(0,t.jsx)(n.code,{children:"--timeout"})," flag:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:"ske upgrade --timeout 10m0s\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsx)(n.p,{children:"The SKE CLI timeout is only enforced while monitoring an upgrade. Timing out on the CLI will not\nfail the upgrade, and progress can still be monitored by checking the status of the Kratix\nresource."})})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>l});var s=i(6540);const t={},r=s.createContext(t);function a(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);