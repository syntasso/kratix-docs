"use strict";(self.webpackChunkkratix_docs=self.webpackChunkkratix_docs||[]).push([[4054],{8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>o});var t=i(6540);const a={},s=t.createContext(a);function r(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(s.Provider,{value:n},e.children)}},8854:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"main/reference/promises/create","title":"Creating a Promise","description":"Documentation on creating a Promise","source":"@site/docs/main/03-reference/11-promises/02-create.md","sourceDirName":"main/03-reference/11-promises","slug":"/main/reference/promises/create","permalink":"/main/reference/promises/create","draft":false,"unlisted":false,"editUrl":"https://github.com/syntasso/kratix-docs/tree/main/docs/main/03-reference/11-promises/02-create.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Creating a Promise","sidebar_label":"Create","description":"Documentation on creating a Promise"},"sidebar":"mainSidebar","previous":{"title":"Introduction","permalink":"/main/reference/promises/intro"},"next":{"title":"Updates","permalink":"/main/reference/promises/updates"}}');var a=i(4848),s=i(8453);const r={title:"Creating a Promise",sidebar_label:"Create",description:"Documentation on creating a Promise"},o=void 0,l={},c=[{value:"Getting Started",id:"getting-started",level:2},{value:"Creating a Promise",id:"creating-a-promise",level:2},{value:"Installing a Promise",id:"installing-a-promise",level:2}];function m(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,a.jsx)(n.p,{children:"When getting started with Kratix, many people install a Marketplace Promise to experiment with. As you use it, it may become clear that you need a more customised solution."}),"\n",(0,a.jsx)(n.p,{children:"You clone the Promise and tweak the Promise description to apply to your own environment. You then install it so the Promise is available for request."}),"\n",(0,a.jsx)(n.p,{children:"This iterative writing is useful because it allows you to use the structure of existing Promises to customise what you want for your own platform. Once you\u2019re comfortable with modifying existing Promises, creating your own from scratch is more natural."}),"\n",(0,a.jsx)(n.p,{children:"We suggest these examples as good starting places:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://docs.kratix.io/marketplace",children:"Promise Marketplace"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"../../../workshop/part-ii/writing-your-first-promise",children:"Promise writing guide"})}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"creating-a-promise",children:"Creating a Promise"}),"\n",(0,a.jsx)(n.p,{children:"You create a Promise by assembling a YAML file which defines all the dependencies and workflows that the Promise will include. It also defines the API that is used to request a resource. Once the Promise is written, it needs to be installed so that the dependencies it refers to will be available when a user requests them."}),"\n",(0,a.jsx)(n.p,{children:"Below is an example of a Promise contains all the essential elements. For Promises that have more complexity, you can see the Promise Marketplace."}),"\n",(0,a.jsx)(n.p,{children:"First, there is the metadata that describes the Promise name, version, and labels."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-apiVersion:",metastring:"platform.kratix.io/v1alpha1",children:"kind: Promise\nmetadata:\n  name: app-example\n  labels:\n    kratix.io/promise-version: v0.1.0\n"})}),"\n",(0,a.jsx)(n.p,{children:"Then the specification describes how the resources will be created."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"Spec:\n"})}),"\n",(0,a.jsx)(n.p,{children:"Dependencies are all the things required for the platform to run the Promise. For example, a Promise might create a namespace."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"dependencies:\n   - apiVersion: v1\n     kind: Namespace\n     metadata:\n       name: promise-example\n"})}),"\n",(0,a.jsx)(n.p,{children:"The API is how the user creates and customises their resources. Using the API, application teams can create, update, or delete promise instances. Users can also use the API to customise the Promise request in ways made available by the Promise. For example, the container image of a resource or its size."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:" api:\n    apiVersion: apiextensions.k8s.io/v1\n    kind: CustomResourceDefinition\n    metadata:\n      name: apps.marketplace.kratix.io\n    spec:\n      group: marketplace.kratix.io\n      names:\n        kind: app\n        plural: apps\n        singular: app\n      scope: Namespaced\n      versions:\n        - name: v1alpha1\n          schema:\n            openAPIV3Schema:\n              properties:\n                spec:\n                  properties:\n                    image:\n                      description: container image for application that will be deployed\n                      example: gcr.io/syntasso/great-app\n                      type: string\n                  type: object\n              type: object\n          served: true\n          storage: true\n"})}),"\n",(0,a.jsx)(n.p,{children:"Workflows are a series of containers executed in sequence. Putting the actions in containers allows them to be consistent and reusable. Containerising the actions allows for maximum flexibility in language and modularity while maximising testability."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"  workflows:\n    resource:\n      configure:\n        - apiVersion: platform.kratix.io/v1alpha1\n          kind: Pipeline\n          metadata:\n            name: configure-resource\n          spec:\n            containers:\n              - name: pipeline-stage-0\n                image: myorg/pipeline-image-1 # Kubernetes defaults to docker.io\n              - name: pipeline-stage-1\n                image: ghcr.io/myorg/pipeline-image-2\n              -  #...\n workflows:\n    resource:\n      configure:\n        - apiVersion: platform.kratix.io/v1alpha1\n          kind: Pipeline\n          metadata:\n            name: instance-configure\n          spec:\n           containers:\n              - name: create-resources\n                image: ghcr.io/syntasso/kratix-marketplace/app-example-promise:v0.1.0\n"})}),"\n",(0,a.jsx)(n.h2,{id:"installing-a-promise",children:"Installing a Promise"}),"\n",(0,a.jsx)(n.p,{children:"Installing a Promise is a simple application of the Promise YAML file to the platform cluster. The API is then available for users to call, promise-workflows execute, and the dependencies are installed and made available so that the Promise can be fulfilled when it is requested. A promise exists on the platform cluster and can be called to create an consistent promise instance at any time."})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(m,{...e})}):m(e)}}}]);