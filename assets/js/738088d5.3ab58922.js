"use strict";(self.webpackChunkkratix_docs=self.webpackChunkkratix_docs||[]).push([[4188],{11470:(e,n,t)=>{t.d(n,{A:()=>w});var a=t(96540),s=t(18215),r=t(17559),i=t(23104),o=t(56347),l=t(205),c=t(57485),d=t(31682),h=t(70679);function u(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,a.useMemo)((()=>{const e=n??function(e){return u(e).map((({props:{value:e,label:n,attributes:t,default:a}})=>({value:e,label:n,attributes:t,default:a})))}(t);return function(e){const n=(0,d.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function m({value:e,tabValues:n}){return n.some((n=>n.value===e))}function f({queryString:e=!1,groupId:n}){const t=(0,o.W6)(),s=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c.aZ)(s),(0,a.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(t.location.search);n.set(s,e),t.replace({...t.location,search:n.toString()})}),[s,t])]}function g(e){const{defaultValue:n,queryString:t=!1,groupId:s}=e,r=p(e),[i,o]=(0,a.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find((e=>e.default))??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:r}))),[c,d]=f({queryString:t,groupId:s}),[u,g]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,s]=(0,h.Dv)(n);return[t,(0,a.useCallback)((e=>{n&&s.set(e)}),[n,s])]}({groupId:s}),y=(()=>{const e=c??u;return m({value:e,tabValues:r})?e:null})();(0,l.A)((()=>{y&&o(y)}),[y]);return{selectedValue:i,selectValue:(0,a.useCallback)((e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);o(e),d(e),g(e)}),[d,g,r]),tabValues:r}}var y=t(92303);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=t(74848);function b({className:e,block:n,selectedValue:t,selectValue:a,tabValues:r}){const o=[],{blockElementScrollPositionUntilNextRender:l}=(0,i.a_)(),c=e=>{const n=e.currentTarget,s=o.indexOf(n),i=r[s].value;i!==t&&(l(n),a(i))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=o.indexOf(e.currentTarget)+1;n=o[t]??o[0];break}case"ArrowLeft":{const t=o.indexOf(e.currentTarget)-1;n=o[t]??o[o.length-1];break}}n?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:r.map((({value:e,label:n,attributes:a})=>(0,v.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{o.push(e)},onKeyDown:d,onClick:c,...a,className:(0,s.A)("tabs__item",x.tabItem,a?.className,{"tabs__item--active":t===e}),children:n??e},e)))})}function k({lazy:e,children:n,selectedValue:t}){const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=r.find((e=>e.props.value===t));return e?(0,a.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==t})))})}function j(e){const n=g(e);return(0,v.jsxs)("div",{className:(0,s.A)(r.G.tabs.container,"tabs-container",x.tabList),children:[(0,v.jsx)(b,{...n,...e}),(0,v.jsx)(k,{...n,...e})]})}function w(e){const n=(0,y.A)();return(0,v.jsx)(j,{...e,children:u(e.children)},String(n))}},19365:(e,n,t)=>{t.d(n,{A:()=>i});t(96540);var a=t(18215);const s={tabItem:"tabItem_Ymn6"};var r=t(74848);function i({children:e,hidden:n,className:t}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,a.A)(s.tabItem,t),hidden:n,children:e})}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var a=t(96540);const s={},r=a.createContext(s);function i(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(r.Provider,{value:n},e.children)}},29856:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>a,toc:()=>h});const a=JSON.parse('{"id":"ske/installing-ske/advanced-install","title":"Advanced installation","description":"Install SKE via Helm and other tools","source":"@site/docs/ske/01-installing-ske/02-advanced-install.mdx","sourceDirName":"ske/01-installing-ske","slug":"/ske/installing-ske/advanced-install","permalink":"/ske/installing-ske/advanced-install","draft":false,"unlisted":false,"editUrl":"https://github.com/syntasso/kratix-docs/tree/main/docs/ske/01-installing-ske/02-advanced-install.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"description":"Install SKE via Helm and other tools","title":"Advanced installation","sidebar_label":"Advanced installation","id":"advanced-install"},"sidebar":"skeSidebar","previous":{"title":"Preconfigured installation","permalink":"/ske/installing-ske/preconfigured-install"},"next":{"title":"Air-gapped installation","permalink":"/ske/installing-ske/air-gapped"}}');var s=t(74848),r=t(28453),i=t(11470),o=t(19365);const l={description:"Install SKE via Helm and other tools",title:"Advanced installation",sidebar_label:"Advanced installation",id:"advanced-install"},c=void 0,d={},h=[{value:"The SKE Operator",id:"the-ske-operator",level:2},{value:"Via the Helm Chart",id:"via-helm-chart",level:2},{value:"Configure values",id:"configure-values",level:3},{value:"The SKE license",id:"the-ske-license",level:4},{value:"SKE version",id:"ske-version",level:4},{value:"Custom Certs",id:"custom-certs",level:4},{value:"Air-gapped mirrors",id:"air-gapped-mirrors",level:4},{value:"Install the Operator",id:"install-the-operator",level:3},{value:"Verify the installation",id:"verify-the-installation",level:3},{value:"Via the Manifests",id:"via-manifests",level:2},{value:"Create the namespace",id:"create-the-namespace",level:3},{value:"Create the Operator configuration",id:"create-the-operator-configuration",level:3},{value:"Deploy the SKE Operator",id:"deploy-the-ske-operator",level:3},{value:"Deploy SKE",id:"deploy-ske",level:3},{value:"Verify the installation",id:"verify-the-installation-1",level:3},{value:"Post Installation",id:"post-installation",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"the-ske-operator",children:"The SKE Operator"}),"\n",(0,s.jsx)(n.p,{children:"The recommended approach to install and manage your SKE installation is to use\nthe SKE Operator. As well as full lifecycle support, it provides a simpler interface\nto customise and secure your SKE instance."}),"\n",(0,s.jsxs)(n.p,{children:["The operator has its own ",(0,s.jsx)(n.a,{href:"/ske/releases/ske-operator",children:"releases"})," and it manages\ninstances of SKE as defined by a ",(0,s.jsx)(n.a,{href:"/ske/reference/ske-operator#kratix-crd",children:"Kratix Custom\nResource"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"To install the SKE Operator and instantiate a new SKE instance, we provide several mechanisms:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#via-helm-chart",children:"With the SKE Operator Helm Chart"}),", you can deploy the Operator and SKE with all the customisations you need, including air-gapped environments."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#via-manifests",children:"With the SKE Operator manifest and the Kratix CRD"}),", you have direct access to the files being deployed, and can customise it manually."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The sections below cover each one of these methods of installation."}),"\n",(0,s.jsx)(n.h2,{id:"via-helm-chart",children:"Via the Helm Chart"}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["Syntasso Kratix Enterprise requires cert-manager to be installed on the cluster\nunless you are configuring ",(0,s.jsx)(n.a,{href:"#custom-certs",children:"custom certificates"}),". Please\nrefer to ",(0,s.jsx)(n.a,{href:"https://cert-manager.io/",children:"its documentation for installation instructions"}),"."]})}),"\n",(0,s.jsx)(n.p,{children:"To install SKE operator using the Helm chart, start by adding the Syntasso Helm\nrepository:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"helm repo add syntasso https://syntasso.github.io/helm-charts\nhelm repo update\n"})}),"\n",(0,s.jsx)(n.h3,{id:"configure-values",children:"Configure values"}),"\n",(0,s.jsxs)(n.p,{children:["Helm can accept values via the values file. Refer to the examples\nbelow for common configuration options. Any configuration should be placed in a\n",(0,s.jsx)(n.code,{children:"values.yaml"})," file that is then passed in to the ",(0,s.jsx)(n.code,{children:"helm install"})," command."]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["You can see all available configuration in the\n",(0,s.jsx)(n.a,{href:"https://github.com/syntasso/helm-charts/blob/main/ske-operator/values.yaml",children:"helm chart repository"}),"."]})}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsxs)("summary",{children:["Suggested starter ",(0,s.jsx)(n.code,{children:"values.yaml"})," file"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"skeLicense: your-token-here\nskeDeployment:\n  version: latest\n"})})]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsxs)("summary",{children:["Example air-gapped ",(0,s.jsx)(n.code,{children:"values.yaml"})," file"]}),(0,s.jsx)(n.p,{children:"To use this example, please set all values to your specific environment"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'  skeLicense: your-token-here\n  skeDeployment:\n    version: latest\n  imageRegistry:\n    host: "ghcr.io"\n    imagePullSecret: "my-secret"\n    skeOperatorImage:\n      name: "syntasso/ske-operator"\n    skePlatformImage:\n      name: "syntasso/ske-platform"\n  releaseStorage:\n    path: "ske"\n    git:\n      branch: main\n      repo: https://github.com/org/repo\n      secret:\n        name: git-creds # the secret must be created in the same namespace as the operator. It must contain the following keys: username, password. If provided below it is automatically created\n        values:\n          username: "my-username" # instead of providing a secretName you can provide the username and password directly\n          password: "my-password"\n'})})]}),"\n",(0,s.jsx)(n.h4,{id:"the-ske-license",children:"The SKE license"}),"\n",(0,s.jsxs)(n.p,{children:["To run SKE, you need a license. You can get one by ",(0,s.jsx)(n.a,{href:"https://www.syntasso.io/pricing",children:"requesting a free trial"}),". In your values file, you can set the ",(0,s.jsx)(n.code,{children:"skeLicense"})," field to the license token provided to you by Syntasso."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"skeLicense: LICENSE # provided to you by Syntasso\n"})}),"\n",(0,s.jsx)(n.h4,{id:"ske-version",children:"SKE version"}),"\n",(0,s.jsxs)(n.p,{children:["The Helm chart version determines what version of the SKE Operator is installed.\nTo configure the version of SKE that the operator will install, you can use the\n",(0,s.jsx)(n.code,{children:"skeDeployment.version"})," field as shown below."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"skeDeployment:\n  version: v0.99.0 # select your desired version\n"})}),"\n",(0,s.jsx)(n.h4,{id:"custom-certs",children:"Custom Certs"}),"\n",(0,s.jsx)(n.p,{children:"By default, the SKE Operator and the SKE instance it deploys use cert-manager to\nmanage TLS certificates for their webhooks. This default setup requires no\nadditional configuration. However, if you prefer not to use cert-manager, you\ncan disable it and manually provide your own TLS certificates."}),"\n",(0,s.jsx)(n.p,{children:"To disable cert-manager and supply your custom certificates, update your\nconfiguration as follows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"global:\n  skeOperator:\n    tlsConfig:\n      certManager:\n        disabled: true\n      webhookCACert: |\n        -----BEGIN CERTIFICATE-----\n        ...\n      webhookTLSKey: |\n        -----BEGIN PRIVATE KEY-----\n        ...\n      webhookTLSCert: |\n        -----BEGIN CERTIFICATE-----\n        ...\n\nskeDeployment:\n  enabled: true\n  tlsConfig:\n    certManager:\n      disabled: true\n    webhookCACert: |\n      -----BEGIN CERTIFICATE-----\n      ...\n    webhookTLSKey: |\n      -----BEGIN PRIVATE KEY-----\n      ...\n    webhookTLSCert: |\n      -----BEGIN CERTIFICATE-----\n      ...\n"})}),"\n",(0,s.jsx)(n.p,{children:"Both the SKE Operator and SKE Deployment require valid TLS certificates for\ntheir webhook servers to securely communicate with the Kubernetes API. Below are\nthe DNS names that must be included in the TLS certificates for each component."}),"\n",(0,s.jsx)(n.p,{children:"The TLS certificate for the SKE Operator's webhook server must cover the\nfollowing DNS names:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"ske-operator-webhook-service.kratix-platform-system.svc"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"ske-operator-webhook-service.kratix-platform-system.svc.cluster.local"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The TLS certificate for the SKE Deployment's webhook server must cover the\nfollowing DNS names:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"kratix-platform-webhook-service.kratix-platform-system.svc"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"kratix-platform-webhook-service.kratix-platform-system.svc.cluster.local"})}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"air-gapped-mirrors",children:"Air-gapped mirrors"}),"\n",(0,s.jsxs)(n.p,{children:["To run SKE in air-gapped environments, you first need to mirror the Image Registry and the Release Storage, as described in the ",(0,s.jsx)(n.a,{href:"./air-gapped",children:"air-gapped setup"})," instructions."]}),"\n",(0,s.jsxs)(n.p,{children:["You can then provide the details of the mirrored Image Registry and Release Storage via the ",(0,s.jsx)(n.code,{children:"imageRegistry"})," and ",(0,s.jsx)(n.code,{children:"releaseStorage"})," fields in your helm values file."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Image Registry"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'imageRegistry:\n  host: "ghcr.io"\n  imagePullSecret: "my-secret"\n  skeOperatorImage:\n    name: "syntasso/ske-operator"\n  skePlatformImage:\n    name: "syntasso/ske-platform"\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Release Storage"})}),"\n",(0,s.jsxs)(i.A,{className:"boxedTabs",groupId:"stateStore",children:[(0,s.jsx)(o.A,{value:"bucket",label:"Mirroring from Bucket",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'releaseStorage:\n  path: "ske" # the path within the bucket that contains the SKE Versions\n  bucket:\n    name: "syntasso-enterprise-releases"\n    region: "eu-west-2"\n      secret:\n        name: "my-secret" # the secret must be created in the same namespace as the operator. It must contain the following keys: accessKeyID, secretAccessKey. If provided below it is automatically created\n        values: # optional: if you\'ve not pre-created the secret, you can instead provide the values below and the helm chart will create it for you\n          accessKeyID: "my-access"\n          secretAccessKey: "my-secret"\n'})})}),(0,s.jsx)(o.A,{value:"git",label:"Mirroring from Git Repo",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'releaseStorage:\n  path: "ske" # the path within the Git Repo that contains the SKE Versions\n  git:\n    branch: main\n    repo: https://github.com/org/repo\n    secret:\n      name: git-creds # the secret must be created in the same namespace as the operator. It must contain the following keys: username, password. If provided below it is automatically created\n      values: # optional: if you\'ve not pre-created the secret, you can instead provide the values below and the helm chart will create it for you\n        username: "my-username" # instead of providing a secretName you can provide the username and password directly\n        password: "my-password"\n'})})})]}),"\n",(0,s.jsx)(n.h3,{id:"install-the-operator",children:"Install the Operator"}),"\n",(0,s.jsx)(n.p,{children:"Next, install the SKE Operator:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"helm install ske-operator syntasso/ske-operator \\\n  --namespace kratix-platform-system \\\n  --create-namespace \\\n  --wait \\\n  --values values.yaml # This is optional. Only use if you are configuring custom values.\n"})}),"\n",(0,s.jsx)(n.h3,{id:"verify-the-installation",children:"Verify the installation"}),"\n",(0,s.jsx)(n.p,{children:"To verify that Syntasso Kratix Enterprise has been installed successfully, run the following command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl get deployments.apps --namespace kratix-platform-system\n"})}),"\n",(0,s.jsx)(n.p,{children:"You should see the following output:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell-session",children:"NAME                                 READY   UP-TO-DATE   AVAILABLE   AGE\nkratix-platform-controller-manager   1/1     1            1           1h\nske-operator-controller-manager      1/1     1            1           1h\n"})}),"\n",(0,s.jsx)(n.p,{children:"You can now proceed with the configuration of Kratix (i.e. registering destinations or\ninstalling promises). For that, refer to the Open-Source Kratix documentation."}),"\n",(0,s.jsx)(n.h2,{id:"via-manifests",children:"Via the Manifests"}),"\n",(0,s.jsx)(n.h3,{id:"create-the-namespace",children:"Create the namespace"}),"\n",(0,s.jsxs)(n.p,{children:["To install the SKE Operator via the ",(0,s.jsx)(n.a,{href:"/ske/releases/ske-operator",children:"distribution manifest"}),",\nyou will first need to create the ",(0,s.jsx)(n.code,{children:"kratix-platform-system"})," namespace. This is where the\nSKE operator will be installed:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl create namespace kratix-platform-system\n"})}),"\n",(0,s.jsx)(n.h3,{id:"create-the-operator-configuration",children:"Create the Operator configuration"}),"\n",(0,s.jsx)(n.p,{children:"If you are not running SKE in an air-gapped environment, all you need to do is create a secret with your license token:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl create secret docker-registry syntasso-registry \\\n  --namespace=kratix-platform-system \\\n  --docker-server=registry.syntasso.io \\\n  --docker-username=syntasso-pkg \\\n  --docker-password=<YOUR TOKEN>\n"})}),"\n",(0,s.jsx)(n.p,{children:"For air-gapped environments, you will need to create a ConfigMap with the following structure:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: ConfigMap\nmetadata:\n  creationTimestamp: null\n  name: ske-operator\n  namespace: kratix-platform-system\ndata:\n  config: |\n    releaseStorage:\n      path: # path within the git repository or bucket to look for releases\n      # one of: git or bucket\n      git:\n        secretName: # the name of the secret containing the git credentials\n        repo: # the git repository to look for releases\n        branch: # the branch to look for releases\n      bucket:\n        name: # the name of the bucket to look for releases\n        endpoint: # the endpoint of the bucket\n        region: # the region of the bucket\n        secretName: # optional: the name of the secret containing the credentials to access the bucket\n    imageRegistry:\n      host: # the host of the image registry\n      pullSecret: # optional: the name of the secret containing the image registry credentials\n      platformImage: # the image of the platform\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Refer to the ",(0,s.jsx)(n.a,{href:"./air-gapped",children:"air-gapped installations"})," section for more\ninformation on how to configure the underlying storage and image registry, as\nwell as the expected structure of the referenced secrets."]}),"\n",(0,s.jsx)(n.h3,{id:"deploy-the-ske-operator",children:"Deploy the SKE Operator"}),"\n",(0,s.jsxs)(n.p,{children:["With all of the prerequisites in place, the platform is now ready to deploy the\nSKE Operator. Locate the desired release of the SKE-Operator and apply its\nmanifest with ",(0,s.jsx)(n.code,{children:"kubectl"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl apply -f http://s3.eu-west-2.amazonaws.com/syntasso-enterprise-releases/ske-operator/<VERSION>/ske-operator-distribution.yaml\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Applying the manifest will install the SKE Operator in the\n",(0,s.jsx)(n.code,{children:"kratix-platform-system"})," namespace, together with a Kratix Custom Resource\nDefinition (CRD) that allows you to manage the Syntasso Kratix Enterprise installation."]}),"\n",(0,s.jsx)(n.h3,{id:"deploy-ske",children:"Deploy SKE"}),"\n",(0,s.jsx)(n.p,{children:"The SKE Operator includes a custom resource definition (CRD) for managing\nSKE. Only one instance of SKE can be created by the SKE Operator in a\ngiven cluster."}),"\n",(0,s.jsxs)(n.p,{children:["To deploy SKE, create a file named ",(0,s.jsx)(n.code,{children:"ske-instance.yaml"})," with the following contents:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"apiVersion: platform.syntasso.io/v1alpha1\nkind: Kratix\nmetadata:\n  name: my-kratix\nspec:\n  version: v0.99.0 # The desired version of SKE\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Apply the file with ",(0,s.jsx)(n.code,{children:"kubectl"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl apply --filename ske-instance.yaml\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The operator will then install SKE and its necessary configurations. For more\ninformation about the Kratix CRD, see the ",(0,s.jsx)(n.a,{href:"/ske/reference/ske-operator",children:"SKE Operator"}),"\ndocumentation."]}),"\n",(0,s.jsx)(n.h3,{id:"verify-the-installation-1",children:"Verify the installation"}),"\n",(0,s.jsx)(n.p,{children:"To verify that Syntasso Kratix Enterprise has been installed successfully, run the following command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl get deployments.apps --namespace kratix-platform-system\n"})}),"\n",(0,s.jsx)(n.p,{children:"You should see the following output:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell-session",children:"NAME                                 READY   UP-TO-DATE   AVAILABLE   AGE\nkratix-platform-controller-manager   1/1     1            1           1h\nske-operator-controller-manager      1/1     1            1           1h\n"})}),"\n",(0,s.jsx)(n.p,{children:"You can now proceed with the configuration of Kratix (i.e. registering destinations or\ninstalling promises). For that, refer to the Open-Source Kratix documentation."}),"\n",(0,s.jsx)(n.h2,{id:"post-installation",children:"Post Installation"}),"\n",(0,s.jsxs)(n.p,{children:["After installing SKE, you must ensure that every namespace where resource\nrequests will be made has access to the SKE license token. When SKE triggers a\nWorkflow for a Promise, the Workflow pulls a SKE image to run as a container\nin the pod. The secret must therefore be present in the namespace so the image\ncan be pulled successfully. For example, to ensure resource requests can be made\nsuccessfully in the ",(0,s.jsx)(n.code,{children:"default"})," namespace you would run the following:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl create secret docker-registry syntasso-registry \\\n  --namespace=default \\\n  --docker-server=registry.syntasso.io \\\n  --docker-username=syntasso-pkg \\\n  --docker-password=<YOUR TOKEN>\n"})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);