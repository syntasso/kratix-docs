"use strict";(self.webpackChunkkratix_docs=self.webpackChunkkratix_docs||[]).push([[4207],{4960:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"ske/kratix/ske-operator","title":"SKE Operator","description":"Documentation about the SKE Operator","source":"@site/docs/ske/01-kratix/05-ske-operator.mdx","sourceDirName":"ske/01-kratix","slug":"/ske/kratix/ske-operator","permalink":"/ske/kratix/ske-operator","draft":false,"unlisted":false,"editUrl":"https://github.com/syntasso/kratix-docs/tree/main/docs/ske/01-kratix/05-ske-operator.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"SKE Operator","description":"Documentation about the SKE Operator"},"sidebar":"skeSidebar","previous":{"title":"Setup for Air-Gapped Environments","permalink":"/ske/kratix/configuring-ske/air-gapped"},"next":{"title":"SKE Health Agent","permalink":"/ske/kratix/ske-health-agent"}}');var i=r(4848),a=r(8453);const s={title:"SKE Operator",description:"Documentation about the SKE Operator"},o=void 0,l={},d=[{value:"Features",id:"features",level:2},{value:"The Kratix Custom Resource Definition (CRD)",id:"the-kratix-custom-resource-definition-crd",level:2},{value:"Managing Kratix via the SKE Operator",id:"managing-kratix-via-the-ske-operator",level:2},{value:"Install",id:"install",level:3},{value:"Upgrade",id:"upgrade",level:3},{value:"Pre-upgrade checks",id:"pre-upgrade-checks",level:4}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"The SKE Operator provides full lifecycle support for Syntasso Kratix Enterprise (SKE) and is the\nrecommended approach for installing and managing your SKE installation."}),"\n",(0,i.jsxs)(n.p,{children:["The operator has its own ",(0,i.jsx)(n.a,{href:"../releases/ske-operator",children:"releases"})," and it manages instances of\nSKE as defined by a ",(0,i.jsx)(n.a,{href:"#the-kratix-custom-resource-definition-crd",children:"Kratix Custom Resource"}),"."]}),"\n",(0,i.jsxs)(n.admonition,{type:"info",children:[(0,i.jsxs)(n.p,{children:["While SKE is can be installed directly via the ",(0,i.jsx)(n.a,{href:"../releases/ske#overview",children:"released SKE distribution\nmanifests"}),", we ",(0,i.jsx)(n.strong,{children:"highly recommend"})," that you use the SKE Operator."]}),(0,i.jsx)(n.p,{children:"Using the Operator will reduce the workload of maintaining SKE, and all future operational\nfeatures will only be available via the Operator."})]}),"\n",(0,i.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,i.jsx)(n.p,{children:"The SKE Operator will:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Install a Kratix instance into your cluster, including dependencies"}),"\n",(0,i.jsxs)(n.li,{children:["Prevent drift of Kratix resources by continuously reconciling them against the declared\n",(0,i.jsx)(n.a,{href:"../releases/ske#overview",children:"SKE distribution"})]}),"\n",(0,i.jsx)(n.li,{children:"Validate SKE is in a healthy state before upgrading with pre-upgrade checks"}),"\n",(0,i.jsx)(n.li,{children:"Roll out an upgrade to the next minor version at the latest patch"}),"\n",(0,i.jsx)(n.li,{children:"Provide information about the status of the upgrade"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"the-kratix-custom-resource-definition-crd",children:"The Kratix Custom Resource Definition (CRD)"}),"\n",(0,i.jsx)(n.p,{children:"The Kratix CRD is the resource definition corresponding to a Kratix installation. This\nresource is managed by the SKE Operator."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: platform.syntasso.io/v1alpha1\nkind: Kratix\nmetadata:\n  name: my-kratix\nspec:\n  version: vX.Y.Z # The desired version of SKE, can be set to latest\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The Kratix resource is the owner of all resources installed as part of the ",(0,i.jsx)(n.a,{href:"../releases/ske#overview",children:"SKE\ndistribution"}),", and ensures that their state always matches the\ndefinition in the distribution manifest."]}),"\n",(0,i.jsx)(n.h2,{id:"managing-kratix-via-the-ske-operator",children:"Managing Kratix via the SKE Operator"}),"\n",(0,i.jsx)(n.h3,{id:"install",children:"Install"}),"\n",(0,i.jsxs)(n.p,{children:["Syntasso Kratix Enterprise supports many ways of installing a Kratix instance. See\n",(0,i.jsx)(n.a,{href:"./configuring-ske/intro",children:"Configuring SKE"})," for details."]}),"\n",(0,i.jsx)(n.h3,{id:"upgrade",children:"Upgrade"}),"\n",(0,i.jsx)(n.p,{children:"To upgrade the SKE instance, you can apply a new version to the Kratix CRD:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: platform.syntasso.io/v1alpha1\nkind: Kratix\nmetadata:\n  name: my-kratix\nspec:\n  version: v0.100.0 # New desired version\n"})}),"\n",(0,i.jsx)(n.p,{children:"By default, the SKE Operator will perform the following steps:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Run the ",(0,i.jsx)(n.a,{href:"#pre-upgrade-checks",children:"pre-upgrade checks"})," to check that Kratix is safe to upgrade in its current state."]}),"\n",(0,i.jsx)(n.li,{children:"Upgrade your Kratix Deployment to the new version."}),"\n",(0,i.jsx)(n.li,{children:"Wait for the Kratix Deployment to become healthy (ready and available)."}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"pre-upgrade-checks",children:"Pre-upgrade checks"}),"\n",(0,i.jsx)(n.p,{children:"The following pre-upgrade checks will run by default:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Check that the current Kratix installation is in ",(0,i.jsx)(n.code,{children:"Ready"})," state."]}),"\n"]}),"\n",(0,i.jsxs)(n.admonition,{type:"info",children:[(0,i.jsxs)(n.p,{children:["An additional check that the desired version is an allowed upgrade path is ",(0,i.jsx)(n.strong,{children:"always"}),"\nperformed."]}),(0,i.jsx)(n.p,{children:"This check passes when the new version is:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"On the same major version as the current version"}),"\n",(0,i.jsx)(n.li,{children:"At most 1 minor version ahead of the current version"}),"\n"]}),(0,i.jsx)(n.p,{children:"Patch versions on the same minor can be upgraded without restrictions."})]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>o});var t=r(6540);const i={},a=t.createContext(i);function s(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);